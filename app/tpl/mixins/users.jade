mixin usersList(controller)
        h3
            span(ng-if="!currentUser.group.title || currentUser.is_super_admin")=titles.users
            span(ng-if="currentUser.group.title && !currentUser.is_super_admin") {{currentUser.group.title}}
            a.pull-sm-right.color-primary.icon-button(ng-click=controller+'.getUsers()')
                i.material-icons.color-primary=actions.refresh.icon
        .users-list-container(ng-if=controller+'.users')
            .user-list-item(ng-repeat='user in '+controller+'.users', ng-class!="{'active': user.time_is_open , 'sleep' : !user.time_is_open, 'striked' : user.time_open.is_strike}")
                i.material-icons.user-status-icon(ng-if='!user.time_is_open') timelapse
                i.material-icons.user-status-icon(ng-if='user.time_is_open && !user.time_open.is_strike') alarm_on
                i.material-icons.user-status-icon(ng-if='user.time_open.is_strike') notifications_active
                .user-info
                    h5
                        a(ui-sref="user({uid:user.id})", ng-if='(currentUser.is_moderator || currentUser.is_super_admin) && !user.is_super_admin') {{user.name}}
                        span(ng-if='(!currentUser.is_moderator && !currentUser.is_super_admin) || user.is_super_admin') {{user.name}}
                    p.email {{user.email}}
                    p.group(ng-if='currentUser.is_super_admin && user.group.id')
                        i.material-icons people
                        a(ui-sref="group({gid:user.group.id})") {{user.group.title}}
                .user-controls
                    .user-actions(ng-if='(currentUser.is_moderator || currentUser.is_super_admin) && user.id != currentUser.id')
                        //delete user
                        i.material-icons.color-accent(ng-click=controller+'.deleteUser(user.id)', ng-if='!user.is_super_admin') delete_forever
                        //strike switch
                        i.material-icons.color-primary(ng-click=controller+'.setStrike(user.id)', ng-if='user.time_is_open && !user.time_open.is_strike') notifications_active
                        i.material-icons.color-primary(ng-click=controller+'.removeStrike(user.id)', ng-if='user.time_is_open && user.time_open.is_strike') notifications_off
                    .group-actions(ng-if='currentUser.is_moderator || currentUser.is_super_admin')
                        //delete from group
                        i.material-icons.color-accent(ng-click=controller + '.deleteUserFromGroup(user.id)', ng-if="user.id != currentUser.id") highlight_off
                        //moderator switch
                        i.material-icons.color-primary(ng-if='!user.is_moderator', ng-click=controller + '.setModerator(user.id)') star_border
                        i.material-icons.color-primary(ng-if='user.is_moderator') star
                    .actions-info(ng-if='!currentUser.is_moderator && !currentUser.is_super_admin')
                        i.material-icons.color-primary(ng-if=controller + '.user.is_moderator') star

mixin groupUsersList(controller)
    h3
        span(ng-bind=controller+'.group.title')
        span &nbsp;
        span=titles.users
        a.pull-sm-right.color-primary.icon-button(ng-click=controller+'.getGroupUsers()', ng-if='currentUser.is_moderator || currentUser.is_super_admin')
            i.material-icons.color-primary=actions.refresh.icon
            span=actions.refresh.title
    .list-container(ng-if=controller+'.users && (currentUser.is_moderator || currentUser.is_super_admin)')
        .list-item.small.user-list(ng-repeat='user in '+controller+'.users', ng-class="user.time_is_open ? 'bg-primary' : 'bg-text'", ng-style="{ 'opacity' : (user.time_open.is_strike) ? '0.8' : '1' }")
            i.list-icon.material-icons(ng-class="user.time_is_open ? 'color-text' : 'color-secundary-text'", ng-bind="user.time_is_open ? 'check_circle' : 'assignment_ind'")
            .user-controls
                //delete from group
                i.material-icons.color-accent(ng-click=controller + '.deleteUserFromGroup(user.id)', ng-if="user.id != currentUser.id") delete
                //moderator switch
                i.material-icons.color-primary(ng-if='user.id != ' + controller + '.group.moderator_id', ng-click=controller + '.setModerator(user.id)') launch
                i.material-icons.color-primary(ng-if='user.id == ' + controller + '.group.moderator_id') school
            h3(ng-class="user.time_is_open ? 'color-text' : 'color-primary-text'")
                a(ui-sref="user({uid:user.id})", ng-if='(currentUser.is_moderator || currentUser.is_super_admin) && !user.is_super_admin') {{user.name}}
                span(ng-if='(!currentUser.is_moderator && !currentUser.is_super_admin) || user.is_super_admin') {{user.name}}
            p(ng-class="user.time_is_open ? 'color-text' : 'color-secundary-text'") {{user.email}}